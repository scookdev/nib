#!/bin/bash

source "/usr/local/bin/_common"
source "/usr/local/bin/_help"

service=$(normalize $1)

shift

script=""

if [ $# -gt 0 ]; then
  script="-c \"$@\""
fi

entrypoint="
  if hash bash 2>/dev/null ; then
    bash $script
  elif hash ash 2>/dev/null ; then
    ash $script
  else
    sh $script
  fi
"

docker-compose exec \
  $service \
  /bin/sh -c "${entrypoint}"
